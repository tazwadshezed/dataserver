define(["jquery","jquery-helpers"],function(b){ss.messages={obscure:{template:function(){return b('<div class="popUp_obscure" />')},attach:function(){this.$element=this.template();this.$element.css({opacity:0}).appendTo("body")},setHeight:function(){this.$element.height(b(window).height())},show:function(a){this.$element||this.attach();this.setHeight();this.$element.show().animate({opacity:0.5},a)},hide:function(a){this.$element.fadeOut(a)}},messageTypes:{notification:{modal:!1,closable:!1,autoDie:2E3,
template:function(a){return['<div class="message warning" style="display:none;">',a.closable?"<a href=class'close'>Close</a>":"",a.content,"</div>"].join("")}},error:{modal:!1,template:function(a){return['<div class="message error" style="display:none;">',a.closable?'<a href="#close" class="close">Close</a>':"",a.content,"</div>"].join("")}},popUp:{modal:!0,template:function(a){return['<div id="popUp_'+(a.id?a.id:"")+'" class="popUp" style="display:none;">',a.closable?'<a href="#close" class="close">Close</a>':
"",a.title?"<h3>"+a.title+"</h3>":"",'<div class="content">',a.content,"</div></div>"].join("")},css:{padding:12,width:400}}},extend:function(a,c,d){this.messageTypes[a]=b.extend({},c,d)},message:{options:{modal:!1,autoDie:0,closable:!0,css:{}},_init:function(a,c){this.options=b.extend({},this.options,ss.messages.messageTypes[a.type]||{},a);this.$element=b(this.options.template(this.options));this.$appendToElement=b(c);this._build();return this},_build:function(){this.$appendToElement&&this.$appendToElement.append(this.$element);
this.$element.css(this.options.css);this._attachListeners();this.show()},_attachListeners:function(){var a=this;this.$element.delegate(".close","click",function(b){b.preventDefault();a.hide()});b("body").delegate(".popUp_obscure","click",function(){a.hide()});b(window).smartresize(function(){a._updatePosition()})},_updatePosition:function(){this.options.modal&&(ss.messages.obscure.setHeight(),this.$element.css({top:Math.max(12,b(window).height()/2-this.$element.height()/2),left:Math.max(12,b(window).width()/
2-this.$element.width()/2)}))},show:function(){this.options.modal&&ss.messages.obscure.show(250);this._updatePosition();this.$element.fadeIn(250);if(0<this.options.autoDie){var a=this;setTimeout(function(){a.hide.apply(a)},a.options.autoDie)}},hide:function(){this.destroy()},destroy:function(){var a=this;this.$element.fadeOut(250,function(){a.$element.remove()});this.options.modal&&ss.messages.obscure.hide(250)}}};return ss.messages.message});