define(["jquery"],function(a){ss.popUps={popUpTemplate:function(a){return['<div id="popUp_'+a.id+'" class="popUp" style="display:none;">',"<h3>"+a.title+"</h3>",'<div class="content">',a.content,"</div></div>"].join("")},popUp:{_init:function(b,c){this.options=a.extend({},this.options,b);this.element=c;this.$element=a(c);this._build();this._addListeners();this._active=!1},_build:function(){var b=this;0>=a(".popUp_obscure").length&&a('<div class="popUp_obscure" />').css({opacity:0}).appendTo("body");
if(!1===this.options.dynamic)this.$myPopUp=a("#"+this.options.target);else if(this.options.path){this.$myPopUp=a(ss.popUps.popUpTemplate({content:'<img src='+ss.urls.src+'"../../../images/icon_loading.gif" class="loading">',id:this.options.id||"dynamic",title:this.options.title||"Dynamic Pop Up"}));a("body").append(this.$myPopUp);this.show();var c=a.ajax({url:b.options.path,cache:!1,async:!0,success:function(a){b.$myPopUp.find("img.loading").hide();b.$myPopUp.find(".content").append(a);b._position()},error:function(){ss.errorMessages({div:"popUp_"+
b.options.id,type:"error",content:"Data failed to load",fixed:!0});b.$myPopUp.find("img.loading").hide()}});a(window).unload(function(){c.abort()})}else this.options.content&&(this.$myPopUp=a(ss.popUps.popUpTemplate({content:this.options.content,id:this.options.id||"dynamic",title:this.options.title||"Dynamic Pop Up"})),a("body").append(this.$myPopUp),this.show());this.$myPopUp.css({width:this.options.width,padding:this.options.padding});!0===this.options.closeLink&&0==this.$myPopUp.children(".popUp_close").length&&
this.$myPopUp.prepend('<a href="#close" class="close">Close</a>')},show:function(){a(".popUp_obscure").show().animate({opacity:0.5},250);this.$myPopUp.fadeIn(250);this._position();this._active=!0},hide:function(){this.$myPopUp.fadeOut(250);a(".popUp_obscure").fadeOut(250);this._active=!1;!0===this.options.dynamic&&this.$myPopUp.remove()},_position:function(){a(".popUp_obscure").height(a(window).height());this.$myPopUp.css({top:Math.max(12,a(window).height()/2-this.$myPopUp.height()/2),left:Math.max(12,
a(window).width()/2-this.$myPopUp.width()/2)})},_addListeners:function(){var b=this;this.$element.click(function(a){a.preventDefault();b.show()});this.$myPopUp.delegate(".close","click",function(a){a.preventDefault();b.hide()});a("body").delegate(".popUp_obscure","click",function(){b.hide()});a(window).smartresize(function(){b._position()})},options:{width:480,padding:24,closable:!0,closeLink:!0,dynamic:!1}}};return ss.popUps.popUp});