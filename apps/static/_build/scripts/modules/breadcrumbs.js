define(["jquery","static/_build/scripts/modules/devices"],function(b, e){ss.breadcrumbs={_init:function(c, a){var d=this;this.element=a;this.$element=b(a);this.options=b.extend({},this.options,c);e.dataDefer.done(function(){if(!c.node){var a=window.location.hash.replace("#","")||e.allNodesByType.SiteArray.id;d.options.node=a}d._build();d._addListeners()})},_build:function(){var c=b("<ul />"),a=e.allNodesById[this.options.node];c.append('<li><a href="#'+e.allNodesByType.SiteArray.id+'" class="deviceNavigation">Array</a></li>');if("SiteArray"!==
a.devtype){for(var d in a.parentNodes)if("SiteArray"!==d){var f=b('<li><a href="#'+a.parentNodes[d][0]+'" class="deviceNavigation">'+a.parentNodes[d][1]+"</a></li>");c.append(f)}c.append('<li><a href="#'+a.id+'" class="deviceNavigation">'+a.label+"</a></li>")}this.$element.append(c)},_addListeners:function(){var c=this;this.$element.delegate("a.deviceNavigation","click",function(a){a.preventDefault();a.stopPropagation();b(document).trigger("setDevice",{deviceId:b(this).attr("href").replace(/#/g,"")})});
b(document).bind("setDevice.breadcrumb",function(a,b){c.update(b.deviceId)})},currentDeviceType:function(){return e.allNodesById[this.options.node].devtype},currentDeviceID:function(){return this.options.node},update:function(c){b("div.breadcrumbs ul").length&&b("div.breadcrumbs ul").remove();this.options.node=c;this._build()},options:{}};return ss.breadcrumbs});